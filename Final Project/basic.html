<html>

<head>
  <title>Final Computer Graphics Project</title>
  <link rel="stylesheet" type="text/css" href="CSS/style.css">
</head>

<style>
  body {
    margin: 0;
  }

  canvas {
    width: 100%;
    height: 100%;
  }
</style>

<body>
  <!--include the three.js library-->
  <script src="js/three.js">
  </script>
  <!--and the trackball code-->
  <script src="js/OrbitControls.js">
  </script>

  <!-- <div id="texture">
  Introduce the texture:
  <form id="texture_form">
    <select id="txt">
      <option value="img/brick_bump.jpg">Bricks</option>
      <option value="img/wood_1.jpg">Wood 1</option>
      <option value="img/wood_2.jpg">Wood 2</option>
    </select>
  </form>
  </div> -->



  <script>
    //Create the scene
    var scene = new THREE.Scene();

    //Create the webgl renderer
    var renderer = new THREE.WebGLRenderer();

    renderer.setSize(window.innerWidth, window.innerHeight);

    //Add the renderer to the current document
    document.body.appendChild(renderer.domElement);

    //Camera creation

    var ratio = window.innerWidth / window.innerHeight;
    //Create the perspective camera
    var camera = new THREE.PerspectiveCamera(45, ratio, 0.1, 1000);
    camera.position.set(60, 25, 60);

    //Light addition -> Camera Light
    var cameraLight = new THREE.PointLight(new THREE.Color(1, 1, 1), (2));
    camera.add(cameraLight);
    scene.add(camera);


    //Texture creation
    // var imgTexture = new THREE.TextureLoader().load("img/brick_bump.jpg");
    // imgTexture.wrapS = imgTexture.wrapT = THREE.RepeatWrapping;
    // imgTexture.anisotropy = 16;
    // imgTexture = null;

    //Create the mesh of a sphere
    //Texture loader
    var textureLoader = new THREE.TextureLoader();
    var geometry_cube = new THREE.BoxGeometry(50, 0.1, 50);
    var cube;
    THREE.ImageUtils.crossOrigin = true;
    textureLoader.crossOrigin = true;

    textureLoader.load("Final Project/img/wood_2.jpg", function(texture) {
          // this code makes the texture repeat
          texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
          texture.repeat.set(1, 1);
          // set the texture as the map for the material
          var material = new THREE.MeshLambertMaterial({
            map: texture
          });
          cube = new THREE.Mesh(geometry_cube, material);
          scene.add(cube);
          cube.position.z -= 2;
          render();
        });

        //Resizing function -> adjust cube position and size to the window size
        var MyResize = function() {
          var width = window.innerWidth;
          var height = window.innerHeight;
          //Update renderer size
          renderer.setSize(width, height);
          //Update camera aspect ratio
          camera.aspect = width / height;
          //Update projection matrix from the new values
          camera.updateProjectionMatrix();
          //Render the scene again
          renderer.render(scene, camera);
        }

        controls = new THREE.OrbitControls(camera);

        //Updating function
        var MyUpdateLoop = function() {
          controls.update();
          //Call the render with the scene and the camera
          renderer.render(scene, camera);
          //Finally perform a recursive call to update again
          //THis must be called because the mouse changes the camera position
          requestAnimationFrame(MyUpdateLoop);
        };

        requestAnimationFrame(MyUpdateLoop);
        var render = function() {
          requestAnimationFrame(render);
          mesh.rotation.x += 0.1;
          renderer.render(scene, camera);
        };

  </script>

</body>

</html>
